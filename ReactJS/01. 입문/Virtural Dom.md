# Virtural Dom?

```ad-note
title: Virtual Dom 이란?
* UI를 표현한 객체
* virtural Dom(가상돔)이란 UI를 표현한 객체를 메모리에 저장해뒀다가 이를 실제 'DOM'과 동기화하는 프로그래밍 개념이다. 이 과정을 재조정이라고 한다.
* 이를 통해, 불필요한 렌더링 횟수를 줄일 수 있다.
* virtural Dom(가상돔)은 차이점을 계산하기 위한 객체라고 볼 수 있다.
```


![](https://i.imgur.com/Tyu7VP1.png)

객체 안에 UI를 표현할 수 있다.

## 1. DOM?
브라우저는 `DOM`이라는 문서를 받으면 브라우저에 그려주는 역할을 한다.

**돔이 변경 된다**(리렌더 과정) - 스타일이 변경, 리스트에 아이템을 추가 등..

### 동기화 하는 이유
브라우저는 `UI`를 표현한 객체는 읽을 수 없기 때문

## 2. 재조정
크게 세 부분으로 이뤄져있다.
1. `UI`가 변경되면 전체 `UI`를 `Virtual DOM`으로 렌더링한다.
2. 현재 `Virtual DOM`과 이전 `Virtual DOM`을 비교해 차이를 계산한다.
3. 변경된 부분을 실제 `DOM`에 반영한다.

![](https://i.imgur.com/I7MJXov.png)

출처 : IMQA

## 3. Reflow / Repaint

### Repaint
재결합된 렌더 트리를 기반으로 다시 화면에 페인트하는 것

### Reflow
레이아웃 계산을 다시 하는 것으로, Reflow가 발생하면 Repaint는 필연적으로 발생!  

리플로우는 HTML 요소들의 위치와 크기를 다시 계산해야 하기 때문에, 리페인트에 비해서 시간이 오래걸린다.  

즉, 변경하려는 특정 요소의 위치와 크기뿐 아니라, 연관된 다른 요소들의 위치와 크기까지 재계산해야 하기 때문이다. 따라서 **리플로우가 자주 발생하도록 하는 코드는 지양해야한다.**
[출처 : pigme](https://velog.io/@heelieben/JavaScript-Reflow-%EB%9E%80-feat.-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EB%A0%8C%EB%8D%94%EB%A7%81)

## 4. Javascript에서 DOM 조작

![](https://i.imgur.com/TCjAzka.png)

이렇게 되면 `API` 데이터 만큼 화면 리렌더링이 3번 발생하게 되는데, $ul에 돔요소를 달아줬고, 이과정에서 리플로우가 이뤄지기 때문.

왜 리렌더링이 발생? 자바스크립트는 메모리에 저장하고 `React`는 메모리에 저장하기 때문!

**하지만 React에서는 리렌더링이 일어나는 부분을 모아 한번에 리렌더링을 시켜준다.**

## 5.  React 초기렌더링
`React`는 싱글 페이지 안에 모든 페이지에 js파일이 들어가있기 때문에 그 파일이 다운로드 되기 전까지는 렌더링이 느릴수밖에 없는 단점이 있다.

---

```ad-important
플러터 붐은 온다.. 존버하자 
```

